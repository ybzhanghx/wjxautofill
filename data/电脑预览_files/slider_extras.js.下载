function getElCoordinate(a){for(var b=a.offsetTop,c=a.offsetLeft,d=a.offsetWidth,e=a.offsetHeight;a=a.offsetParent;)b+=a.offsetTop,c+=a.offsetLeft;return{top:b,left:c,width:d,height:e,bottom:b+e,right:c+d}}var getElementById,neverModules;"function"!=typeof getElementById&&(getElementById=function(a){if("object"==typeof a)return a;if(document.getElementById(a))return document.getElementById(a);throw new Error(a+' argument error, can not find "'+a+'" element')}),neverModules=window.neverModules||{},neverModules.modules=neverModules.modules||{},neverModules.modules.slider=function(a){if("object"!=typeof a)throw new Error("config argument is not a object, error raise from slider constructor");this.sliderValue=a.sliderValue,this.targetId=a.targetId,this.hints=a.hints?a.hints:"",this.sliderCss=a.sliderCss?a.sliderCss:"",this.barCss=a.barCss?a.barCss:"",this.min=a.min?a.min:0,this.max=a.max?a.max:100,this.onstart=function(){},this.onchange=a.change||function(){},this.onend=function(){},this._defaultInitializer.apply(this)},neverModules.modules.slider.prototype={_defaultInitializer:function(){if(this._bar=null,this._slider=null,this._wrapper=null,this._target=getElementById(this.targetId),this._sliderPoint=null,this.min>this.max){var a=this.min;this.min=this.max,this.max=a}this._value=this.min},create:function(){this._createSlider()},dispose:function(){},createBar:function(_slider){var _self,is10,ruler,len,imax,leftLen,i,node,cwidth,dwidth;with(this)if(_self=this,_bar=document.createElement("DIV"),_wrapper.appendChild(_bar),_bar.title=hints,_bar.id=targetId+"_bar",_bar.className=barCss,_bar.style.position="absolute",_bar.style.zIndex="3",_bar.onmousedown=function(a){_self._initMoveSlider(a)},_sliderPoint=document.createElement("span"),_wrapper.appendChild(_sliderPoint),_sliderPoint.id=targetId+"_sp",_sliderPoint.style.color="red",_sliderPoint.style.fontSize="14px",_sliderPoint.style.width="24px",_sliderPoint.style.height="20px",_sliderPoint.style.textAlign="center",_sliderPoint.style.position="absolute",_sliderPoint.style.whiteSpace="nowrap",targetId.indexOf("_")>-1,is10=0==(this.max-this.min)%10,is10||this.max-this.min<=20){for(ruler=document.createElement("div"),ruler.id=targetId+"_ruler",ruler.className="ruler",len=parseInt((this.max-this.min)/10),1>len&&(len=1),imax=10,is10||(imax=this.max-this.min,len=1),leftLen=100/imax,i=0;imax>=i;i++)node=document.createElement("div"),node.className="cm",0==i?node.style.left="-4px":i==imax?node.style.right="-5px":node.style.left=i*leftLen+"%",i==imax&&(node.style.width="0"),node.setAttribute("data-value",this.min+i*len),ruler.appendChild(node);ruler.onclick=function(){_slider.onclick()},cwidth=_wrapper.clientWidth,0==_wrapper.clientWidth&&(cwidth=390),dwidth=cwidth-10,_slider.style.width=cwidth+"px",ruler.style.width=dwidth+"px",_wrapper.appendChild(ruler)}},setValue:function(n,notfire){var sLeft,marginLeft,sWith;with(this){if(!_bar)return;n=_Number(Number(n)),n=n>max?max:min>n?min:n,_bar.style.left=Math.round((n-min)*(_slider.offsetWidth/(max-min))-this._bar.offsetWidth/2)+"px",_value=n,sLeft=parseInt(this._bar.style.left),marginLeft=18,this.max>=100&&(marginLeft=26),sWith=this._slider.offsetWidth-marginLeft,sLeft>sWith&&sWith>0&&(sLeft=sWith),this._sliderPoint.style.left=sLeft+"px",this._sliderPoint.style.top=this._bar.offsetHeight-58+"px",this._sliderPoint.innerHTML=_value||"",notfire||(fireChange(),fireEnd())}},getValue:function(){return this._value},fireStart:function(){this.onstart.call(this)},fireChange:function(){var a,b,c;completeLoaded&&(this._bar.title=this._value,this.sliderValue.type?this.sliderValue.value=this._value:this.sliderValue.style.display="none",a=parseInt(this._bar.style.left),b=18,this.max>=100&&(b=26),c=this._slider.offsetWidth-b,a>c&&c>0&&(a=c),this._sliderPoint.style.left=a+6+"px",this._sliderPoint.style.top=this._bar.offsetHeight-58+"px",this._sliderPoint.innerHTML=this._value,this._sliderPoint.zIndex="2",this._target.value=this._value,this.onchange.call(this._target))},fireEnd:function(){this.onend.call(this)},_createSlider:function(){var divClear,_self;with(this)_wrapper=document.createElement("DIV"),_target.appendChild(_wrapper),_wrapper.id=targetId+"_wrapper",_wrapper.style.position="relative",_slider=document.createElement("DIV"),_wrapper.appendChild(_slider),_slider.id=targetId+"_slider",_slider.className=sliderCss,_slider.style.position="absolute",_slider.style.zIndex="2",createBar(_slider),divClear=document.createElement("DIV"),divClear.style.clear="both",_wrapper.appendChild(divClear),_self=this,_slider.onclick=function(a){_self._moveTo(a)}},_moveTo:function(evt){with(this){evt=evt?evt:window.event;var x=evt.clientX-getElCoordinate(_slider).left-Math.round(_bar.offsetWidth/2);x=_coordsX(x),_bar.style.left=x+"px",_value=Math.round((x+_bar.offsetWidth/2)/(_slider.offsetWidth/(max-min))+min),fireChange(),fireEnd()}},_coordsX:function(x){with(this)return x=_Number(x),x=x<=_slider.offsetLeft-_bar.offsetWidth/2?_slider.offsetLeft-_bar.offsetWidth/2:x>=_slider.offsetLeft+_slider.offsetWidth-_bar.offsetWidth/2?_slider.offsetLeft+_slider.offsetWidth-_bar.offsetWidth/2:x},_coordsY:function(y){with(this);},_Number:function(a){return isNaN(a)?0:a},_initMoveSlider:function(evt){with(this){evt=evt?evt:window.event;var _self=this;_bar.slider_x=evt.clientX-_bar.offsetLeft,fireStart(),document.onmousemove=function(a){_self._changeHandle(a)},document.onmouseup=function(a){_self._endHandle(a)}}},_changeHandle:function(evt){with(this){evt=evt?evt:window.event;var x=evt.clientX-_bar.slider_x-_bar.offsetWidth/2;x=_coordsX(x),_value=Math.round((x+_bar.offsetWidth/2)/(_slider.offsetWidth/(max-min))+min),_bar.style.left=x+"px",fireChange()}},_endHandle:function(evt){with(this)document.onmousemove=null,document.onmouseup=null,fireEnd()}};